import{j as e,f as ce,h as Be,i as Oe,S as oe,r,k as Ue,u as Ve,l as $e,a as Fe,m as H,b as j,n as Q,t as P,B as f,o as Ge,p as He,I as le,q as Qe,M as We,s as qe,v as Ke,A as Je,H as Ye,w as Xe}from"./index-D9PHDzQu.js";import{d as Ze,e as es}from"./messageEncryption-Bi4GA-wm.js";import{M as ss,a as ts}from"./MessageInput-B0hk3d27.js";import{D as de,b as ue,c as he,d as me,a as ns}from"./dialog-DY9M37Cv.js";import{A as as,a as rs,b as is}from"./avatar-CUJzzkaW.js";import{R as os}from"./RoomManagement-NxqnCbJQ.js";import{M as ls,L as cs}from"./imageCompression-DOYNJt-j.js";import"./urlFix-Ck1V5EyF.js";function ds({isOpen:n,onClose:h,members:x,roomId:p,canModerate:o,onUserClick:m,godModeEnabled:l,currentUserId:u}){const d=i=>{switch(i){case"admin":return e.jsx(oe,{className:"w-4 h-4 text-red-500"});case"moderator":return e.jsx(oe,{className:"w-4 h-4 text-blue-500"});case"vip":return e.jsx(Oe,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(Be,{className:"w-4 h-4 text-gray-500"})}},k=i=>{switch(i){case"admin":return"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä";case"moderator":return"–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä";case"vip":return"VIP";default:return"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}},y=x.filter(i=>!(l&&i.username==="iBro"&&i.id!==u));return e.jsx(de,{open:n,onOpenChange:i=>!i&&h(),children:e.jsxs(ue,{className:"max-w-md",children:[e.jsx(he,{children:e.jsxs(me,{children:["–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–Ω–∞—Ç—ã (",y.length,")"]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:y.map(i=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-accent transition-colors cursor-pointer",onClick:()=>m&&m(i.id),children:[e.jsx(as,{className:"w-10 h-10",children:i.avatar||i.avatar_url?e.jsx(rs,{src:i.avatar||i.avatar_url,alt:i.display_name||i.username}):e.jsx(is,{className:"bg-primary/10 text-primary",children:(i.display_name||i.username).charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{children:i.display_name||i.username}),i.display_name&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["@",i.username]}),e.jsxs(ce,{variant:"outline",className:"flex items-center gap-1",children:[d(i.role),k(i.role)]})]}),(()=>{const E=i.last_activity;if(!E)return e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),"–ù–µ –≤ —Å–µ—Ç–∏"]});const w=new Date().getTime()-new Date(E).getTime();if(w<300*1e3)return e.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600"}),"–û–Ω–ª–∞–π–Ω"]});const N=Math.floor(w/(60*1e3)),T=Math.floor(w/(3600*1e3)),A=Math.floor(w/(1440*60*1e3));let b="";return A>0?b=`${A} –¥. –Ω–∞–∑–∞–¥`:T>0?b=`${T} —á. –Ω–∞–∑–∞–¥`:N>0?b=`${N} –º–∏–Ω. –Ω–∞–∑–∞–¥`:b="—Ç–æ–ª—å–∫–æ —á—Ç–æ",e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),b]})})()]})]},i.id))})]})})}const W=r.createContext({open:!1,setOpen:()=>{}});function us({open:n,onOpenChange:h,children:x}){const[p,o]=r.useState(!1),m=n!==void 0?n:p,l=r.useCallback(u=>{h?h(u):o(u)},[h]);return e.jsx(W.Provider,{value:{open:m,setOpen:l},children:e.jsx("div",{className:"relative inline-block",children:x})})}function hs({asChild:n,children:h,onClick:x,...p}){const{open:o,setOpen:m}=r.useContext(W),l=u=>{m(!o),x?.(u)};return n&&r.isValidElement(h)?r.cloneElement(h,{onClick:l}):e.jsx("button",{"data-slot":"popover-trigger",onClick:l,...p,children:h})}function ms({className:n,align:h="center",sideOffset:x=4,children:p,...o}){const{open:m,setOpen:l}=r.useContext(W),u=r.useRef(null);if(r.useEffect(()=>{if(!m)return;const k=i=>{u.current&&!u.current.contains(i.target)&&l(!1)},y=i=>{i.key==="Escape"&&l(!1)};return document.addEventListener("mousedown",k),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("keydown",y)}},[m,l]),!m)return null;const d={start:"left-0",center:"left-1/2 -translate-x-1/2",end:"right-0"};return e.jsx("div",{ref:u,"data-slot":"popover-content",className:Ue("absolute z-50 mt-2 w-72 origin-top rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden animate-in fade-in-0 zoom-in-95",d[h],n),style:{top:`calc(100% + ${x}px)`},...o,children:p})}function ks({room:n,onBack:h,onUserClick:x,onOpenFriends:p}){const{user:o,godModeEnabled:m}=Ve(),{tracker:l}=$e(),u=Fe(),[d,k]=r.useState([]),[y,i]=r.useState(!0),[E,w]=r.useState(null),[N,T]=r.useState(""),[A,b]=r.useState(!1),[fe,q]=r.useState(!1),[z,K]=r.useState(""),[ge,J]=r.useState([]),[D,B]=r.useState(n),[fs,gs]=r.useState(null),[xe,Y]=r.useState(!1),[pe,ve]=r.useState([]),[je,X]=r.useState(!1),[ye,L]=r.useState(!1),[we,Ne]=r.useState(!1),[O,Z]=r.useState(0),[U,ee]=r.useState(0),[V,be]=r.useState(null),se=r.useRef(null),$=r.useRef(null),te=o&&["admin","moderator"].includes(o.role),Me=n.created_by===o?.id;r.useEffect(()=>{if(C(),ne(),n.type==="dm"&&n.dm_participants&&o){const t=n.dm_participants.find(a=>a!==o.id);t&&H.getById(t).then(a=>be(a.user)).catch(console.error)}const s=setInterval(()=>{C(),ne()},3e3);return()=>clearInterval(s)},[n.id]);const ne=async()=>{try{const t=(await j.getAll()).rooms.find(a=>a.id===n.id);t&&o&&(Z(t.unread_mentions?.[o.id]||0),ee(t.unread_reactions?.[o.id]||0),B(t))}catch(s){console.error("Failed to update unread counts:",s)}};r.useEffect(()=>{const s=$.current;if(!s)return;const t=()=>{const{scrollTop:a,scrollHeight:c,clientHeight:R}=s,ie=c-a-R<200;Ne(!ie)};return s.addEventListener("scroll",t),()=>s.removeEventListener("scroll",t)},[]);const I=()=>{se.current?.scrollIntoView({behavior:"smooth"})},ke=async()=>{try{const s=n.members.map(c=>H.getById(c)),a=(await Promise.all(s)).map(c=>c.user).filter(Boolean);ve(a)}catch(s){console.error("Failed to load room members:",s)}},C=async(s=0)=>{try{const a=(await Q.get(n.id,100,m)).messages.filter(G=>G!=null);if(d.length>0&&o){const G=d[d.length-1]?.id;a.filter(v=>v&&v.created_at>(d[d.length-1]?.created_at||"")).forEach(v=>{if(v&&v.mentions?.includes(o.id)&&v.sender_id!==o.id){const ze=v.sender_display_name||v.sender_username;P.info(`${ze} —É–ø–æ–º—è–Ω—É–ª –≤–∞—Å`,{description:v.content.substring(0,50)+(v.content.length>50?"...":"")})}})}const c=$.current,R=c?c.scrollHeight-c.scrollTop-c.clientHeight<150:!1;(d.length!==a.length||a.length>0&&d.length>0&&(d[d.length-1]?.id!==a[a.length-1]?.id||d[d.length-1]?.updated_at!==a[a.length-1]?.updated_at))&&(k(a),R&&c&&requestAnimationFrame(()=>{c.scrollTop=c.scrollHeight})),i(!1)}catch(t){if(console.error("Failed to load messages:",t),s===0&&t.message?.includes("—É—á–∞—Å—Ç–Ω–∏–∫–æ–º")){console.log("Retrying message load after 1 second..."),setTimeout(()=>C(1),1e3);return}i(!1)}},Ce=async(s,t,a)=>{try{let c;c=await es(s,u),console.log("SessionCrypto: Message encrypted for database"),await Q.send(n.id,c,t,a),w(null),l&&(l.checkFirstMessage(),l.checkTotalMessages(),l.checkNightMessage(),l.checkSpeedShooter(),l.checkNewYearMessage(),l.checkDailyActivity(),l.checkParadoxMessage(s,new Date().toISOString()),l.checkMentions(s),t==="voice"&&l.checkVoiceMessage(),t==="image"&&l.checkPhotoSent(),t==="file"&&l.checkFileSent(),t==="video"&&l.checkVideoCircleSent(),a&&l.checkReply()),await C(),setTimeout(I,100)}catch(c){P.error(c.message||"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è")}},Se=async s=>{try{await Q.delete(s),await C()}catch(t){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:",t)}},_e=async s=>{try{await j.pinMessage(n.id,s);const a=(await j.getAll()).rooms.find(c=>c.id===n.id);a&&B(a)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è:",t)}},Re=async()=>{try{await j.unpinMessage(n.id);const t=(await j.getAll()).rooms.find(a=>a.id===n.id);t&&B(t)}catch(s){console.error("–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω–∏—è:",s)}},ae=async()=>{if(z.trim())try{const s=await H.search(z);J(s.users)}catch(s){console.error("–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:",s)}},Ae=async s=>{try{await j.invite(n.id,s),q(!1),K(""),J([])}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:",t)}},Ie=async()=>{try{if(n.name==="üîí –ê–∑–∫–∞–±–∞–Ω"&&o?.banned){P.error("–ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–∫–∏–Ω—É—Ç—å –ê–∑–∫–∞–±–∞–Ω");return}await j.leave(n.id),h()}catch(s){console.error("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:",s),P.error(s.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É")}},re=s=>{x&&x(s)},Ee=async()=>{const s=d.filter(t=>t.mentions?.includes(o.id)&&t.sender_id!==o.id);if(s.length>0){const t=s[0],a=document.getElementById(`message-${t.id}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("highlight-message"),setTimeout(()=>a.classList.remove("highlight-message"),2e3))}n.isGodMode||(await j.markAsRead(n.id,!0,!1),Z(0))},Te=async()=>{const s=d.filter(t=>t.sender_id===o.id&&t.reactions&&Object.values(t.reactions).some(a=>a.length>0));if(s.length>0){const t=s[s.length-1],a=document.getElementById(`message-${t.id}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("highlight-message"),setTimeout(()=>a.classList.remove("highlight-message"),2e3))}n.isGodMode||(await j.markAsRead(n.id,!1,!0),ee(0))};r.useEffect(()=>{const s=async()=>{if(o&&!n.isGodMode){const t=n.last_read?.[o.id]?new Date(n.last_read[o.id]).getTime():0,a=d.filter(c=>new Date(c.created_at).getTime()>t&&c.sender_id!==o.id);if(a.length>0){const c=a[a.length-1];setTimeout(()=>{const R=document.getElementById(`message-${c.id}`);R?R.scrollIntoView({behavior:"smooth",block:"center"}):I()},300)}else setTimeout(()=>I(),300);await j.markAsRead(n.id,!1,!1)}else setTimeout(()=>I(),300)};!y&&d.length>0&&s()},[n.id,n.isGodMode,o,d.length,y]);const g=D.pinned_message_id?d.find(s=>s.id===D.pinned_message_id):null,[De,S]=r.useState(null);r.useEffect(()=>{(async()=>{if(!g){S(null);return}if(u&&u.isReady)try{const t=await Ze(g.content,u,g);S(t)}catch(t){console.error("SessionCrypto: Failed to decrypt pinned message:",t),S("[üîí –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å]")}else try{const t=JSON.parse(g.content);t&&t.version&&t.ciphertext?S("[üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ - –æ–∂–∏–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π...]"):S(g.content)}catch{S(g.content)}})()},[g,cryptoKey]);const F=o?.muted,_=o?.banned,M=n.name==="üîí –ê–∑–∫–∞–±–∞–Ω",Le=M?!F:!F&&!_,Pe=!(M&&_);return je?e.jsx(os,{room:D,onBack:()=>X(!1)}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-30 border-b p-4 pt-6 flex items-center justify-between bg-background",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:h,disabled:M&&_,title:M&&_?"–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å –ê–∑–∫–∞–±–∞–Ω, –ø–æ–∫–∞ –∑–∞–±–∞–Ω–µ–Ω—ã":"–ù–∞–∑–∞–¥",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[n.type==="dm"&&V?V.display_name||V.username:n.name,n.isGodMode&&e.jsx(ce,{variant:"secondary",className:"text-xs",children:"–†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è"})]}),n.type==="dm"?e.jsx("p",{className:"text-sm text-muted-foreground",children:"–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"}):e.jsxs("button",{onClick:()=>{ke(),Y(!0)},className:"text-sm text-muted-foreground hover:text-foreground transition-colors cursor-pointer",children:[n.members.length," —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ‚Ä¢ ",n.type==="public"?"–ü—É–±–ª–∏—á–Ω–∞—è":"–ü—Ä–∏–≤–∞—Ç–Ω–∞—è"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[n.type==="private"&&!n.isGodMode&&e.jsxs(de,{open:fe,onOpenChange:q,children:[e.jsx(ns,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",children:e.jsx(He,{className:"w-4 h-4"})})}),e.jsxs(ue,{children:[e.jsx(he,{children:e.jsx(me,{children:"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{value:z,onChange:s=>K(s.target.value),placeholder:"–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...",onKeyDown:s=>s.key==="Enter"&&ae()}),e.jsx(f,{onClick:ae,children:"–ù–∞–π—Ç–∏"})]}),e.jsx("div",{className:"space-y-2",children:ge.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{children:s.username}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsx(f,{size:"sm",onClick:()=>Ae(s.id),disabled:n.members.includes(s.id),children:n.members.includes(s.id)?"–í –∫–æ–º–Ω–∞—Ç–µ":"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å"})]},s.id))})]})]})]}),e.jsx(f,{variant:"outline",size:"icon",onClick:()=>b(!A),children:e.jsx(Qe,{className:"w-4 h-4"})}),!n.isGodMode&&e.jsxs(us,{open:ye,onOpenChange:L,children:[e.jsx(hs,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",children:e.jsx(ls,{className:"w-4 h-4"})})}),e.jsx(ms,{className:"w-56 p-2",align:"end",children:e.jsxs("div",{className:"space-y-1",children:[M&&_&&e.jsx(e.Fragment,{children:p&&e.jsxs(f,{variant:"ghost",className:"w-full justify-start",onClick:()=>{L(!1),p&&p()},children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"]})}),(te||Me)&&!M&&e.jsxs(f,{variant:"ghost",className:"w-full justify-start",onClick:()=>{L(!1),X(!0)},children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–æ–π"]}),Pe&&e.jsxs(f,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{L(!1),Ie()},children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"–ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç"]})]})})]})]})]}),g&&e.jsxs("div",{className:"sticky top-[73px] z-20 border-b p-3 bg-yellow-50 dark:bg-yellow-950/20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(Ke,{className:"w-4 h-4 text-yellow-600 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("p",{className:"text-sm truncate",children:[e.jsxs("span",{className:"text-muted-foreground",children:[g.sender_display_name||g.sender_username,": "]}),(()=>{const s=g.type;if(s==="video")return"üé• –í–∏–¥–µ–æ";if(s==="voice"||s==="audio")return"üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ";const t=De||g.content;if(t&&t.startsWith("![")&&t.includes("]("))return"üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ";if(t&&(t.startsWith("http://")||t.startsWith("https://"))){if(t.includes("/voice/")||t.includes("/audio/")||t.includes("voice")||t.includes("audio"))return"üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ";if(t.includes("/video/")||t.includes("video"))return"üé• –í–∏–¥–µ–æ";if(t.includes("/images/")||t.includes("/image/")||t.includes("images")||t.includes("image"))return"üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ";if(t.includes("/storage/v1/object/"))return"üìé –§–∞–π–ª"}return t?t.length>50?t.substring(0,50)+"...":t:"[üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ]"})()]})})]}),o&&["admin","moderator","vip"].includes(o.role)&&e.jsx(f,{variant:"ghost",size:"sm",onClick:Re,children:"–û—Ç–∫—Ä–µ–ø–∏—Ç—å"})]}),A&&e.jsx("div",{className:"sticky top-[73px] z-20 border-b p-3 bg-muted/50",children:e.jsx(le,{value:N,onChange:s=>T(s.target.value),placeholder:"–ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º..."})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{ref:$,className:"absolute inset-0 overflow-y-auto p-4",children:y?e.jsx("div",{className:"flex items-center justify-center h-full",children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π..."}):d.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π. –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ!"}):e.jsxs(e.Fragment,{children:[d.filter(s=>s!=null).filter(s=>!N||s.content.toLowerCase().includes(N.toLowerCase())||s.sender_username.toLowerCase().includes(N.toLowerCase())||s.sender_display_name&&s.sender_display_name.toLowerCase().includes(N.toLowerCase())).map(s=>{const t=s.reply_to?d.find(a=>a&&a.id===s.reply_to):null;return e.jsx("div",{id:`message-${s.id}`,children:e.jsx(ss,{message:s,onReply:w,onPin:_e,onDelete:Se,onUserClick:re,isPinned:s.id===D.pinned_message_id,replyToMessage:t,onEdit:C})},s.id)}),e.jsx("div",{ref:se})]})}),e.jsxs("div",{className:"absolute bottom-4 right-4 z-20 flex flex-col gap-2",children:[O>0&&e.jsxs(f,{onClick:Ee,size:"icon",className:"rounded-full shadow-lg hover:shadow-xl transition-shadow bg-destructive hover:bg-destructive/90",variant:"default",children:[e.jsx(Je,{className:"w-5 h-5"}),O>1&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-destructive-foreground text-destructive text-xs rounded-full flex items-center justify-center",children:O})]}),U>0&&e.jsxs(f,{onClick:Te,size:"icon",className:"rounded-full shadow-lg hover:shadow-xl transition-shadow bg-pink-500 hover:bg-pink-600",variant:"default",children:[e.jsx(Ye,{className:"w-5 h-5"}),U>1&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-pink-500 text-xs rounded-full flex items-center justify-center",children:U})]}),we&&e.jsx(f,{onClick:I,size:"icon",className:"rounded-full shadow-lg hover:shadow-xl transition-shadow bg-primary text-primary-foreground z-30",variant:"default",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"sticky bottom-0 z-20 bg-background border-t",children:_&&!M?e.jsx("div",{className:"p-4 bg-destructive/10 text-center",children:e.jsx("p",{className:"text-destructive",children:"–í—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ê–∑–∫–∞–±–∞–Ω–µ"})}):F?e.jsx("div",{className:"p-4 bg-warning/10 text-center",children:e.jsx("p",{className:"text-warning",children:"–í—ã –≤ –º—É—Ç–µ –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è"})}):e.jsx(ts,{onSend:Ce,replyingTo:E,onCancelReply:()=>w(null),disabled:!Le||n.isGodMode})}),e.jsx(ds,{isOpen:xe,onClose:()=>Y(!1),members:pe,roomId:n.id,canModerate:te||!1,onUserClick:re,godModeEnabled:m,currentUserId:o?.id})]})}export{ks as ChatRoom};
