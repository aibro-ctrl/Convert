function t(r){if(!r.startsWith("http://")&&!r.startsWith("https://"))return!1;const e=r.trim();return e.length>500?!1:[/\/storage\/v1\/object\//,/\.(mp4|webm|ogg|mp3|wav|m4a|jpg|jpeg|png|gif|webp)(\?|$)/i,/\/images\//,/\/video\//,/\/audio\//,/\/voice\//].some(i=>i.test(e))}async function s(r,e){if(t(r))return r;if(!e||!e.isReady)return console.warn("SessionCrypto: Encryption not ready, sending unencrypted"),r;try{return await e.encrypt(r)}catch(a){return console.error("SessionCrypto: Encryption failed:",a),r}}async function c(r,e,a){if(t(r)||!e||!e.isReady)return r;try{return await e.decrypt(r)}catch(i){return console.error("SessionCrypto: Decryption failed:",i),r}}export{c as d,s as e};
