# ðŸš€ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Backend - Ð¡Ð•Ð™Ð§ÐÐ¡

## âš¡ Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ¹ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

ÐžÑˆÐ¸Ð±ÐºÐ° `Cannot find module 'pocketbase'` Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð° Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½Ðµ Ð±Ñ‹Ð»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹.

### ðŸ”§ Ð ÐµÑˆÐµÐ½Ð¸Ðµ (2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹):

```bash
# 1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² backend-setup
cd backend-setup

# 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
chmod +x install-deps.sh
./install-deps.sh

# 3. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Ð·Ð°Ð½Ð¾Ð²Ð¾
./setup.sh
```

**Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!** Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²ÑÑ‘ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ.

---

## ðŸ“ Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾

Ð’ ÑÐºÑ€Ð¸Ð¿Ñ‚Ðµ `setup.sh` Ñ‚ÐµÐ¿ÐµÑ€ÑŒ:
1. âœ… Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÑŽÑ‚ÑÑ ÐŸÐ•Ð Ð•Ð” ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹
2. âœ… Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ `install-deps.sh` Ð´Ð»Ñ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
3. âœ… Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº

---

## ðŸŽ¯ ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:

```bash
cd /var/www/Convert/src/backend-setup
npm install pocketbase ioredis dotenv
```

### 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ:

```bash
node -e "console.log(require('pocketbase'))"
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ: [Function: default]
```

### 3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸:

```bash
node create-collections.js
```

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ:

```bash
node test-connection.js
```

---

## ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¾Ð¹

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾:

```bash
# PocketBase Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½?
curl http://localhost:8090/api/health
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ: {"code":200,"message":"API is healthy.","data":{}}

# Redis Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚?
redis-cli ping
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ: PONG

# Node.js ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½?
node --version
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ: v20.x.x Ð¸Ð»Ð¸ Ð²Ñ‹ÑˆÐµ
```

---

## âœ… ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ ÐŸÐ Ð¯ÐœÐž Ð¡Ð•Ð™Ð§ÐÐ¡

```bash
# Ð¨ÐÐ“ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
cd /var/www/Convert/src/backend-setup
npm install pocketbase ioredis dotenv

# Ð¨ÐÐ“ 2: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹
node create-collections.js

# Ð¨ÐÐ“ 3: Ð¢ÐµÑÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
node test-connection.js

# Ð¨ÐÐ“ 4: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ .env (ÐµÑÐ»Ð¸ ÐµÑ‰Ðµ Ð½ÐµÑ‚)
cd ..
cat > .env << 'EOF'
VITE_BACKEND_TYPE=pocketbase
VITE_POCKETBASE_URL=http://localhost:8090
VITE_REDIS_HOST=localhost
VITE_REDIS_PORT=6379
VITE_REDIS_DB=0
VITE_E2EE_ENABLED=true
VITE_REALTIME_ENABLED=true
JWT_SECRET=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
ENCRYPTION_KEY=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
EOF

# Ð¨ÐÐ“ 5: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
echo "ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ http://localhost:8090/_/ Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð°"

# Ð¨ÐÐ“ 6: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
npm run dev
```

---

## ðŸŽ‰ ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

Ð’Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ:

```
ðŸ“¦ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹ Ð² PocketBase...
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "users" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "rooms" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "messages" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "achievements" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "user_achievements" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "friend_requests" ÑÐ¾Ð·Ð´Ð°Ð½Ð°
âœ“ ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ "files" ÑÐ¾Ð·Ð´Ð°Ð½Ð°

ðŸ† Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ñ… Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ð¹...
  âœ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: ðŸŽ‰ ÐŸÐµÑ€Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
  âœ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: ðŸŒ™ ÐŸÐ¾Ð»ÑƒÐ½Ð¾Ñ‡Ð½Ð¸Ðº
  âœ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: ðŸ’¬ Ð‘Ð¾Ð»Ñ‚ÑƒÐ½
  ... Ð¸ Ñ‚.Ð´.

âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾!
```

---

## ðŸ› Ð•ÑÐ»Ð¸ Ð²ÑÑ‘ ÐµÑ‰Ðµ ÐµÑÑ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: node_modules Ð½Ðµ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ

```bash
cd /var/www/Convert/src/backend-setup
rm -rf node_modules package-lock.json
npm install
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: PocketBase Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
ps aux | grep pocketbase

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
cd /opt/pocketbase
./pocketbase serve --http=0.0.0.0:8090
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

```bash
# Ð”Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð½Ð° Ð¿Ð°Ð¿ÐºÑƒ
sudo chown -R $USER:$USER /var/www/Convert
```

---

## ðŸ“ž ÐÑƒÐ¶Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ?

ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð²Ñ‹Ð²Ð¾Ð´ ÑÑ‚Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´:

```bash
# Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
node --version
npm --version
redis-cli --version

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
curl http://localhost:8090/api/health
redis-cli ping

# Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
ls -la /var/www/Convert/src/backend-setup/
```

---

**Ð’ÐµÑ€ÑÐ¸Ñ:** 1.0.1 (Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ° Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÐ¼Ð¸)  
**Ð”Ð°Ñ‚Ð°:** 01.12.2025  
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ
